{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Trabajo/Repositorios/SistemasHorariosUPDS/SistemaHorariosUPDS/web-horarios-upds/src/lib/axios.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://127.0.0.1:3001/api',\r\n    timeout: 10000, // 10 segundos de timeout\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\n// Interceptor para inyectar Token\r\napi.interceptors.request.use(\r\n    (config) => {\r\n        const token = typeof window !== 'undefined' ? localStorage.getItem('token') : null;\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => Promise.reject(error)\r\n);\r\n\r\n// Interceptor para logs o manejo de errores global\r\napi.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n        console.error('API Error:', error.response?.data || error.message);\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAM,8KAAK,CAAC,MAAM,CAAC;IACrB,SAAS;IACT,SAAS;IACT,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,kCAAkC;AAClC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG,MAAM,QAAQ,uCAAgC,aAAa,OAAO,CAAC,WAAW;IAC9E,IAAI,OAAO;QACP,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IACpD;IACA,OAAO;AACX,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;AAG9B,mDAAmD;AACnD,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,QAAQ,KAAK,CAAC,cAAc,MAAM,QAAQ,EAAE,QAAQ,MAAM,OAAO;IACjE,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///D:/Trabajo/Repositorios/SistemasHorariosUPDS/SistemaHorariosUPDS/web-horarios-upds/src/features/auth/services/auth.service.ts"],"sourcesContent":["import api from '../../../lib/axios';\r\n\r\nexport interface LoginResponse {\r\n    user: {\r\n        id: string;\r\n        email: string;\r\n        fullName: string;\r\n        role: string;\r\n        teacherId?: string;\r\n    };\r\n    token: string;\r\n}\r\n\r\nexport const authService = {\r\n    async login(username: string, password: string): Promise<LoginResponse> {\r\n        const response = await api.post<LoginResponse>('/auth/login', { username, password });\r\n        return response.data;\r\n    },\r\n\r\n    logout() {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/login';\r\n    },\r\n\r\n    getCurrentUser() {\r\n        if (typeof window === 'undefined') return null;\r\n        const userStr = localStorage.getItem('user');\r\n        return userStr ? JSON.parse(userStr) : null;\r\n    }\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAaO,MAAM,cAAc;IACvB,MAAM,OAAM,QAAgB,EAAE,QAAgB;QAC1C,MAAM,WAAW,MAAM,4JAAG,CAAC,IAAI,CAAgB,eAAe;YAAE;YAAU;QAAS;QACnF,OAAO,SAAS,IAAI;IACxB;IAEA;QACI,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IAEA;QACI;;QACA,MAAM,UAAU,aAAa,OAAO,CAAC;QACrC,OAAO,UAAU,KAAK,KAAK,CAAC,WAAW;IAC3C;AACJ"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///D:/Trabajo/Repositorios/SistemasHorariosUPDS/SistemaHorariosUPDS/web-horarios-upds/src/app/dashboard/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { authService } from '@/features/auth/services/auth.service';\r\n\r\nexport default function DashboardLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const router = useRouter();\r\n    const [authorized, setAuthorized] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const user = authService.getCurrentUser();\r\n        if (!user) {\r\n            router.push('/login');\r\n        } else {\r\n            setAuthorized(true);\r\n        }\r\n    }, [router]);\r\n\r\n    if (!authorized) {\r\n        return null; // O un spinner full screen\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {children}\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS,gBAAgB,EACpC,QAAQ,EAGX;;IACG,MAAM,SAAS,IAAA,6KAAS;IACxB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,oMAAQ,EAAC;IAE7C,IAAA,qMAAS;qCAAC;YACN,MAAM,OAAO,mMAAW,CAAC,cAAc;YACvC,IAAI,CAAC,MAAM;gBACP,OAAO,IAAI,CAAC;YAChB,OAAO;gBACH,cAAc;YAClB;QACJ;oCAAG;QAAC;KAAO;IAEX,IAAI,CAAC,YAAY;QACb,OAAO,MAAM,2BAA2B;IAC5C;IAEA,qBACI;kBACK;;AAGb;GA1BwB;;QAKL,6KAAS;;;KALJ"}}]
}